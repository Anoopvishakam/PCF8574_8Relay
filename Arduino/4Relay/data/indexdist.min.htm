<html><head><style>body{text-align:center;color:#fff;background-color:#b9d9fc}.lightStatus{margin-top:5px;color:#fff;font-size:14px;font-family:Verdana}section{margin:0;padding:0;width:160px;display:inline-block}input[type=checkbox]{display:block;opacity:0}label{width:60px;height:30px;cursor:pointer;display:inline-block;position:relative;background:#8a0000;border-radius:30px;transition:background-color .4s;-moz-transition:background-color .4s;-webkit-transition:background-color .4s}label:after{left:0;width:20px;height:20px;margin:5px;content:'';position:absolute;background:#fff;border-radius:10px}input:checked+label{background:#007531}input:checked+label:after{left:auto;right:0}p{font:normal 20px/40px Arial;color:#bdbdbd;display:none;text-transform:uppercase;letter-spacing:1px}.switch{font:normal 20px/40px Arial;color:#000;text-transform:uppercase;letter-spacing:1px;margin:0}input:checked~p:nth-of-type(1){color:#007531;display:block}input:not(:checked)~p:nth-of-type(2){color:#8a0000;display:block}.wrapper svg{margin:48px auto}.wrap{min-height:10vh;max-width:720px;margin:0 auto;display:flex;flex-direction:row;align-items:center;justify-content:center}.wrap .half{width:50%;padding:12px 0;align-items:left;justify-content:left}.title{font-family:sans-serif;line-height:24px;display:block;padding:8px 0}.onoff{margin:auto;text-align:center;font-family:sans-serif;line-height:50px;padding:10px;display:inline-block}</style><script>var wsc;document.addEventListener("DOMContentLoaded",function(){(wsc=new ReconnectingWebSocket("ws://"+window.location.hostname+":81")).timeoutInterval=3e3,wsc.onopen=function(e){console.log("WebSocketClient connected:",e)},wsc.onmessage=function(e,t,n){console.log("WebSocketClient message #${number}: ",e);var o=JSON.parse(e.data);"ON"==o.light1?document.getElementById("onoff1").checked=!0:document.getElementById("onoff1").checked=!1,"ON"==o.light2?document.getElementById("onoff2").checked=!0:document.getElementById("onoff2").checked=!1,"ON"==o.light3?document.getElementById("onoff3").checked=!0:document.getElementById("onoff3").checked=!1,"ON"==o.light4?document.getElementById("onoff4").checked=!0:document.getElementById("onoff4").checked=!1},document.getElementById("onoff1").onchange=function(){var e;e=document.getElementById("onoff1").checked?{light:1,state:"ON"}:{light:1,state:"OFF"},wsc.send(JSON.stringify(e))},document.getElementById("onoff2").onchange=function(){var e;e=document.getElementById("onoff2").checked?{light:2,state:"ON"}:{light:2,state:"OFF"},wsc.send(JSON.stringify(e))},document.getElementById("onoff3").onchange=function(){var e;e=document.getElementById("onoff3").checked?{light:3,state:"ON"}:{light:3,state:"OFF"},wsc.send(JSON.stringify(e))},document.getElementById("onoff4").onchange=function(){var e;e=document.getElementById("onoff4").checked?{light:4,state:"ON"}:{light:4,state:"OFF"},wsc.send(JSON.stringify(e))}})</script><script>!function(e,n){"function"==typeof define&&define.amd?define([],n):"undefined"!=typeof module&&module.exports?module.exports=n():e.ReconnectingWebSocket=n()}(this,function(){function l(e,t,n){function c(e,n){var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}var o={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};for(var i in n||(n={}),o)this[i]=void 0!==n[i]?n[i]:o[i];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var r,s=this,u=!1,a=!1,d=document.createElement("div");d.addEventListener("open",function(e){s.onopen(e)}),d.addEventListener("close",function(e){s.onclose(e)}),d.addEventListener("connecting",function(e){s.onconnecting(e)}),d.addEventListener("message",function(e){s.onmessage(e)}),d.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=d.addEventListener.bind(d),this.removeEventListener=d.removeEventListener.bind(d),this.dispatchEvent=d.dispatchEvent.bind(d),this.open=function(o){r=new WebSocket(s.url,t||[]),o||d.dispatchEvent(c("connecting")),(s.debug||l.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var e=r,n=setTimeout(function(){(s.debug||l.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),a=!0,e.close(),a=!1},s.timeoutInterval);r.onopen=function(){clearTimeout(n),(s.debug||l.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=r.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var e=c("open");e.isReconnect=o,o=!1,d.dispatchEvent(e)},r.onclose=function(e){if(clearTimeout(t),r=null,u)s.readyState=WebSocket.CLOSED,d.dispatchEvent(c("close"));else{s.readyState=WebSocket.CONNECTING;var n=c("connecting");n.code=e.code,n.reason=e.reason,n.wasClean=e.wasClean,d.dispatchEvent(n),o||a||((s.debug||l.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),d.dispatchEvent(c("close")));var t=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},t>s.maxReconnectInterval?s.maxReconnectInterval:t)}},r.onmessage=function(e){(s.debug||l.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,e.data);var n=c("message");n.data=e.data,d.dispatchEvent(n)},r.onerror=function(e){(s.debug||l.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,e),d.dispatchEvent(c("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(e){if(r)return(s.debug||l.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,e),r.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,n){void 0===e&&(e=1e3),u=!0,r&&r.close(e,n)},this.refresh=function(){r&&r.close()}}return l.prototype.onopen=function(){},l.prototype.onclose=function(){},l.prototype.onconnecting=function(){},l.prototype.onmessage=function(){},l.prototype.onerror=function(){},l.debugAll=!1,l.CONNECTING=WebSocket.CONNECTING,l.OPEN=WebSocket.OPEN,l.CLOSING=WebSocket.CLOSING,l.CLOSED=WebSocket.CLOSED,l})</script></head><body><h1 class="lightStatus"></h1><div class="wrap"><div class="half"><section><h4 class="switch">Switch 1</h4><input type="checkbox" id="onoff1" class="onoff"> <label for="onoff1"></label><p>ON</p><p>OFF</p></section></div><div class="half"><section><h4 class="switch">Switch 2</h4><input type="checkbox" id="onoff2" class="onoff"> <label for="onoff2"></label><p>ON</p><p>OFF</p></section></div></div><div class="wrap"><div class="half"><section><h4 class="switch">Switch 3</h4><input type="checkbox" id="onoff3" class="onoff"> <label for="onoff3"></label><p>ON</p><p>OFF</p></section></div><div class="half"><section><h4 class="switch">Switch 4</h4><input type="checkbox" id="onoff4" class="onoff"> <label for="onoff4"></label><p>ON</p><p>OFF</p></section></div></div><div class="wrap"><div class="half"><section><h4 class="switch">Switch 5</h4><input type="checkbox" id="onoff5" class="onoff"> <label for="onoff5"></label><p>ON</p><p>OFF</p></section></div><div class="half"><section><h4 class="switch">Switch 6</h4><input type="checkbox" id="onoff6" class="onoff"> <label for="onoff6"></label><p>ON</p><p>OFF</p></section></div></div><div class="wrap"><div class="half"><section><h4 class="switch">Switch 7</h4><input type="checkbox" id="onoff7" class="onoff"> <label for="onoff7"></label><p>ON</p><p>OFF</p></section></div><div class="half"><section><h4 class="switch">Switch 8</h4><input type="checkbox" id="onoff8" class="onoff"> <label for="onoff8"></label><p>ON</p><p>OFF</p></section></div></div></body></html>