<html>
    <!-- Minify first -->
    <!-- gzip -c9 < indexdist.min.htm > indexdist.min.htm.gz -->
<head>
    <style>body{text-align:center;color:#fff;background-color:#b9d9fc}.lightStatus{margin-top:5px;color:#fff;font-size:14px;font-family:Verdana}section{margin:0;padding:0;width:160px;display:inline-block}input[type=checkbox]{display:block;opacity:0}label{width:60px;height:30px;cursor:pointer;display:inline-block;position:relative;background:#8a0000;border-radius:30px;transition:background-color .4s;-moz-transition:background-color .4s;-webkit-transition:background-color .4s}label:after{left:0;width:20px;height:20px;margin:5px;content:'';position:absolute;background:#fff;border-radius:10px}input:checked+label{background:#007531}input:checked+label:after{left:auto;right:0}p{font:normal 20px/40px Arial;color:#bdbdbd;display:none;text-transform:uppercase;letter-spacing:1px}.switch{font:normal 20px/40px Arial;color:#000;text-transform:uppercase;letter-spacing:1px;margin:0}input:checked~p:nth-of-type(1){color:#007531;display:block}input:not(:checked)~p:nth-of-type(2){color:#8a0000;display:block}.wrapper svg{margin:48px auto}.wrap{min-height:10vh;max-width:720px;margin:0 auto;display:flex;flex-direction:row;align-items:center;justify-content:center}.wrap .half{width:50%;padding:12px 0;align-items:left;justify-content:left}.title{font-family:sans-serif;line-height:24px;display:block;padding:8px 0}.onoff{margin:auto;text-align:center;font-family:sans-serif;line-height:50px;padding:10px;display:inline-block}</style>
    <script>var wsc;document.addEventListener("DOMContentLoaded",function(){(wsc=new ReconnectingWebSocket("ws://"+window.location.hostname+":81")).timeoutInterval=3e3,wsc.onopen=function(e){console.log("WebSocketClient connected:",e)},wsc.onmessage=function(e,t,n){console.log("WebSocketClient message #${number}: ",e);var o=JSON.parse(e.data);"ON"==o.light1?document.getElementById("onoff1").checked=!0:document.getElementById("onoff1").checked=!1,"ON"==o.light2?document.getElementById("onoff2").checked=!0:document.getElementById("onoff2").checked=!1,"ON"==o.light3?document.getElementById("onoff3").checked=!0:document.getElementById("onoff3").checked=!1,"ON"==o.light4?document.getElementById("onoff4").checked=!0:document.getElementById("onoff4").checked=!1},document.getElementById("onoff1").onchange=function(){var e;e=document.getElementById("onoff1").checked?{light:1,state:"ON"}:{light:1,state:"OFF"},wsc.send(JSON.stringify(e))},document.getElementById("onoff2").onchange=function(){var e;e=document.getElementById("onoff2").checked?{light:2,state:"ON"}:{light:2,state:"OFF"},wsc.send(JSON.stringify(e))},document.getElementById("onoff3").onchange=function(){var e;e=document.getElementById("onoff3").checked?{light:3,state:"ON"}:{light:3,state:"OFF"},wsc.send(JSON.stringify(e))},document.getElementById("onoff4").onchange=function(){var e;e=document.getElementById("onoff4").checked?{light:4,state:"ON"}:{light:4,state:"OFF"},wsc.send(JSON.stringify(e))}});</script>
    <script>!function(a,b){"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports?module.exports=b():a.ReconnectingWebSocket=b()}(this,function(){function a(b,c,d){function l(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,!1,!1,b),c}var e={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};d||(d={});for(var f in e)this[f]="undefined"!=typeof d[f]?d[f]:e[f];this.url=b,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var h,g=this,i=!1,j=!1,k=document.createElement("div");k.addEventListener("open",function(a){g.onopen(a)}),k.addEventListener("close",function(a){g.onclose(a)}),k.addEventListener("connecting",function(a){g.onconnecting(a)}),k.addEventListener("message",function(a){g.onmessage(a)}),k.addEventListener("error",function(a){g.onerror(a)}),this.addEventListener=k.addEventListener.bind(k),this.removeEventListener=k.removeEventListener.bind(k),this.dispatchEvent=k.dispatchEvent.bind(k),this.open=function(b){h=new WebSocket(g.url,c||[]),b||k.dispatchEvent(l("connecting")),(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",g.url);var d=h,e=setTimeout(function(){(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",g.url),j=!0,d.close(),j=!1},g.timeoutInterval);h.onopen=function(){clearTimeout(e),(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onopen",g.url),g.protocol=h.protocol,g.readyState=WebSocket.OPEN,g.reconnectAttempts=0;var d=l("open");d.isReconnect=b,b=!1,k.dispatchEvent(d)},h.onclose=function(c){if(clearTimeout(e),h=null,i)g.readyState=WebSocket.CLOSED,k.dispatchEvent(l("close"));else{g.readyState=WebSocket.CONNECTING;var d=l("connecting");d.code=c.code,d.reason=c.reason,d.wasClean=c.wasClean,k.dispatchEvent(d),b||j||((g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onclose",g.url),k.dispatchEvent(l("close")));var e=g.reconnectInterval*Math.pow(g.reconnectDecay,g.reconnectAttempts);setTimeout(function(){g.reconnectAttempts++,g.open(!0)},e>g.maxReconnectInterval?g.maxReconnectInterval:e)}},h.onmessage=function(b){(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",g.url,b.data);var c=l("message");c.data=b.data,k.dispatchEvent(c)},h.onerror=function(b){(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onerror",g.url,b),k.dispatchEvent(l("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(b){if(h)return(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","send",g.url,b),h.send(b);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(a,b){"undefined"==typeof a&&(a=1e3),i=!0,h&&h.close(a,b)},this.refresh=function(){h&&h.close()}}return a.prototype.onopen=function(){},a.prototype.onclose=function(){},a.prototype.onconnecting=function(){},a.prototype.onmessage=function(){},a.prototype.onerror=function(){},a.debugAll=!1,a.CONNECTING=WebSocket.CONNECTING,a.OPEN=WebSocket.OPEN,a.CLOSING=WebSocket.CLOSING,a.CLOSED=WebSocket.CLOSED,a});</script>
</head>

<body>
    <h1 class="lightStatus"></h1>
    <div class="wrap">
        <div class="half">
            <section>
                <h4 class="switch">Switch 1</h4>
                <input type="checkbox" id="onoff1" class="onoff"/>
                <label for="onoff1"></label>
                <p>ON</p>
                <p>OFF</p>
            </section>
        </div>
        <div class="half">
            <section>
                <h4 class="switch">Switch 2</h4>
                <input type="checkbox" id="onoff2" class="onoff" />
                <label for="onoff2"></label>
                <p>ON</p>
                <p>OFF</p>
            </section>
        </div>
    </div>
    <div class="wrap">
        <div class="half">
            <section>
                <h4 class="switch">Switch 3</h4>
                <input type="checkbox" id="onoff3" class="onoff" />
                <label for="onoff3"></label>
                <p>ON</p>
                <p>OFF</p>
            </section>
        </div>
        <div class="half">
            <section>
                <h4 class="switch">Switch 4</h4>
                <input type="checkbox" id="onoff4" class="onoff" />
                <label for="onoff4"></label>
                <p>ON</p>
                <p>OFF</p>
            </section>
        </div>
    </div>
    <div class="wrap">
            <div class="half">
                <section>
                    <h4 class="switch">Switch 5</h4>
                    <input type="checkbox" id="onoff5" class="onoff"/>
                    <label for="onoff5"></label>
                    <p>ON</p>
                    <p>OFF</p>
                </section>
            </div>
            <div class="half">
                <section>
                    <h4 class="switch">Switch 6</h4>
                    <input type="checkbox" id="onoff6" class="onoff" />
                    <label for="onoff6"></label>
                    <p>ON</p>
                    <p>OFF</p>
                </section>
            </div>
        </div>
        <div class="wrap">
            <div class="half">
                <section>
                    <h4 class="switch">Switch 7</h4>
                    <input type="checkbox" id="onoff7" class="onoff" />
                    <label for="onoff7"></label>
                    <p>ON</p>
                    <p>OFF</p>
                </section>
            </div>
            <div class="half">
                <section>
                    <h4 class="switch">Switch 8</h4>
                    <input type="checkbox" id="onoff8" class="onoff" />
                    <label for="onoff8"></label>
                    <p>ON</p>
                    <p>OFF</p>
                </section>
            </div>
        </div>
</body>

</html>